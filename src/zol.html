<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="./css/init.css">
    <link rel="stylesheet" href="./css/index/index.css">
</head>

<body>
    <div class="top_bar">
        <div class="bar_one">
            <div class="mid_bar">
                <div class="bar_left">
                    <span>商城首页</span>
                    <span>Hi~欢迎来到ZOL商城，请<a href="">登录</a></span>
                    <span><a href="">免费注册</a></span>
                </div>
                <ul class="bar_right">
                    <li><a href="#">我的订单</a></li>
                    <li><a href="#">买家中心</a></li>
                    <li><a href="#">购物<em>0</em>件</a></li>
                    <li><a href="#">帮助中心</a></li>
                    <li><a href="#">手机商城</a></li>
                    <li><a href="#">中关村在线</a></li>
                    <li><a href="#">联系客服</a></li>
                </ul>
            </div>
        </div>
        <div class="wrap_search">
            <div class="search">
                <div class="log">
                    <h1>
                    <a href="#" title="ZOL商城"></a>
                </h1>
                    <div class="where">
                        <span>全国</span>
                    </div>
                </div>
            </div>
            <div class="entry">
                <a href="#" class="cart">我的订单<i class="ico"></i></a>
                <a href="#" class="coupon">我的优惠券<i class="ico"></i></a>
                <a href="#" class="order">购物车<i class="ico"></i></a>
            </div>
            <div class="search_box">
                <form action="" method="get">
                    <div class="se_out">
                        <input id="search_sale" type="text" placeholder="找找您想要的商品">
                        <div class="fire_sale">
                            <span><a href="#">戴尔限时促销</a></span>
                            <span><a href="#">三星Note8</a></span>
                        </div>
                        <input type="submit" id="submit" value="搜索">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- 菜单 -->
    <div class="m2">
        <div class="m2_wrap">
            <ul>
                <li><a href="#">首页</a></li>
                <li><a href="#">团购</a></li>
                <li><a href="#">电子竞技</a></li>
                <li><a href="#">本地优选</a></li>
                <li><a href="#">家电优选</a></li>
            </ul>
            <div class="m2_meau">
                <ol>
                    <li class="sub_all"><i class="ico"></i><span>全部分类</span></li>
                    <li><i class="ico1"></i><a href="#">手机<i></i></a></li>
                    <li><i class="ico2"></i><a href="#">电脑<i></i></a></li>
                    <li><i class="ico3"></i><a href="#">DIY<i></i></a></li>
                    <li><i class="ico4"></i><a href="#">数码<i></i></a></li>
                    <li><i class="ico5"></i><a href="#">外设<i></i></a></li>
                    <li><i class="ico6"></i><a href="#">智能<i></i></a></li>
                    <div style="height: 76px;background-color: rgb(69, 69, 69);"></div>
                    <div class="subtype">
                    </div>
                </ol>
            </div>
        </div>
    </div>
    <!-- 轮播图 -->
    <div class="m3">
        <span class="left"></span>
        <span class="right"></span>
        <ul>
            <li class="first"></li>
            <li></li>
            <li></li>
        </ul>
        <a class="bgpic" href="javascript:;"><img src="./images/m3/nav1.jpg" alt=""></a>
        <a class="bgpic" href="javascript:;" style="opacity: 0"><img src="./images/m3/nav2.jpg" alt=""></a>
        <a class="bgpic" href="javascript:;" style="opacity: 0"><img src="./images/m3/nav3.jpg" alt=""></a>
    </div>
    <!-- 团购 -->
    <div class="m4">
        <button type="button" class="btn_left"></button>
        <button type="button" class="btn_right"></button>
        <div class="wraper">
            <div class="section_tg">
                <h4>团购<em>热门、低价、买实惠</em></h4>
            </div>
            <ul>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span>华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span>55</span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span></span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
                <li>
                    <img alt="">
                    <div>
                        <h4>荣耀畅玩7A 32GB</h4>
                        <span></span>
                        <p>￥859</p>
                        <div><em>剩余</em><span>33</span></div>
                    </div>
                    <ol>
                        <li class="shaw_1">
                            <div><img alt=""></div>
                            <p>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                                <a href="javascript:;">评价</a>
                            </p>
                        </li>
                        <li class="shaw_2">
                            <span> 华为麦芒 6 64GB</span>
                            <span>团购价：¥1289</span>
                            <span>电商参考价：¥1265.00</span>
                            <span class="tg"><a href="javascript:;">去团购</a></span>
                        </li>
                    </ol>
                </li>
            </ul>
            <div class="turn">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </div>
    <!-- 领券中兴 -->
    <div class="m5">
        <div class="wraper">
            <ul class="clear">
                <li class="coupon">
                    <h3>领券中心</h3>
                    <p>COUPON</p>
                    <a href="javascript:;">去看看&gt;&gt;</a>
                </li>
                <li>
                    <i class="ico"></i>
                    <div class="all clear">
                        <div class="price">￥10</div>
                        <div class="name">
                            <h4>胜兵专营店</h4>
                            <span>满4499可用</span>
                        </div>
                    </div>
                    <div class="getcp"><a href="javascript:;">立即领取</a></div>
                </li>
                <li>
                    <i class="ico"></i>
                    <div class="all clear">
                        <div class="price">￥10</div>
                        <div class="name">
                            <h4>胜兵专营店</h4>
                            <span>满4499可用</span>
                        </div>
                    </div>
                    <div class="getcp"><a href="javascript:;">立即领取</a></div>
                </li>
                <li>
                    <i class="ico"></i>
                    <div class="all clear">
                        <div class="price">￥10</div>
                        <div class="name">
                            <h4>胜兵专营店</h4>
                            <span>满4499可用</span>
                        </div>
                    </div>
                    <div class="getcp"><a href="javascript:;">立即领取</a></div>
                </li>
                <li>
                    <i class="ico"></i>
                    <div class="all clear">
                        <div class="price">￥10</div>
                        <div class="name">
                            <h4>胜兵专营店</h4>
                            <span>满4499可用</span>
                        </div>
                    </div>
                    <div class="getcp"><a href="javascript:;">立即领取</a></div>
                </li>
            </ul>
        </div>
    </div>
    <div class="zhixuan"">
        <div class="wrap">
            <h3>Z智选</h3>
            <div><img src="./images/index/padpic.png" alt=""></div>
        </div>
    </div>
    <div class="hovers">
        <div class="wrap section">
            <h3>品牌精选<span>大牌、保障、服务赞</span></h3>
            <ul class="clear">
                <li><a href="#"><img src="./images/index/ChMkJ1s_IL6IAAn1AABfITG9iuYAApg0AGcn3kAAF85555.jpg" alt=""></a></li>
                <li><a href="#"><img src="./images/index/1.jpg" alt=""></a><a href="#">王俊凯 戴尔DELL游匣G3</a>
                    <p>RMB&nbsp;<em>7,499</em></p>
                </li>
                <li><a href="#"><img src="./images/index/2.jpg" alt=""></a><a href="#">王俊凯戴尔DELL游匣G7</a>
                    <p>RMB&nbsp;<em>7,499</em></p>
                </li>
                <li><a href="#"><img src="./images/index/3.jpg" alt=""></a><a href="#">王俊凯戴尔 游匣G3</a>
                    <p>RMB&nbsp;<em>7,499</em></p>
                </li>
                <li><a href="#"><img src="./images/index/4.jpg" alt=""></a><a href="#">王俊凯 戴尔游匣 G7</a>
                    <p>RMB&nbsp;<em>7,499</em></p>
                </li>
            </ul>
        </div>
    </div>
    <div class="right_side">
        <div class="sale_tab"></div>
        <div class="sale_foots"></div>
        <div class="sale_cart"></div>
        <div class="sale_ticket"></div>
        <div class="backtop">
            <a href="#"></a>
        </div>
    </div>
    <div class="footer">
        <div class="foot_wrap">
            <div class="footer_nav">
                <a href="#">中关村在线</a> |
                <a href="#">Z商城</a> |
                <a href="#">团购</a> |
                <a href="#">产品报价</a> |
                <a href="#">论坛</a> |
                <a href="#">问答</a>
            </div>
            <div class="footer_us">
                <a href="#">关于Z商城</a> |
                <a href="#">帮助中心</a> |
                <a href="#">联系我们</a> |
                <a href="#"><img src="" alt=""></a>
            </div>
            <div class="foot_other">
            </div>
        </div>
    </div>
    <script src="./script/libs/jquery.min.js"></script>
    <script src="./script/js/index_effect.js"></script>
    <script src="./script/js/index.js"></script>
    <script>
    ! function() {
        var aLi = $(".m2_meau li").not(".sub_all");
        var ol = $(".m2_meau .subtype");
        aLi.hover(function() {
            var id = $(this).index();
            var that = $(this);
            ol.css({ display: "block" })
            $.ajax({
                dataType: "json",
                type: "GET",
                url: "http://10.31.165.18/jingdong/zol/php/index_block.php",
                data: "id=" + id,
                success: function(msg) {
                    var arr1 = msg[0];
                    var path = msg[1][0].path;
                    var str = '<div class="sub_details">';
                    $.each(arr1, function(i, n) {
                        str += "<a href='javascript:;'>" + n[0] + "</a>";
                    });
                    str += "<img src=./images/index/" + path + "></div>"
                    // console.log(str);

                    ol.html(str);
                },
                error: function(msg) {
                    console.log("数据获取失败")
                }
            })
        }, function() {
            ol.css({ display: "none" })
        });
    }();

    // 给团购的板块添加图片
    $(function() {

            ! function() {
                var timer;
                var timer2;
                var aLi = $(".m4 ul>li");
                var leftbtn = $(".btn_left");
                var rightbtn = $(".btn_right");
                var btns = $(".btn_left,.btn_right");
                var ul = $(".m4 ul");
                var index = 1;
                var spans = $(".turn span");
                var positions = ["0", "-1205px", "-2405px", "-3609px", "-4815px"];
                $.ajax({
                    dataType: "json",
                    type: 'GET',
                    url: "http://10.31.165.18/jingdong/zol/php/index_sales.php",
                    success: function(msg) {
                        aLi.each(function() {

                            var index = $(this).index();

                            console.log($(this).index())
                            if ($(this).index() == 9) {
                                console.log($(this));
                            }
                            $(this).find(">div h4").html(msg[index][0]);
                            $(this).find(">div p").html("￥" + msg[index][1]);
                            $(this).children("img").attr({ src: "./images/m4/" + msg[index][2] });
                            $(this).find("ol img").attr({ src: "./images/m4/" + msg[index][2] });
                            $(this).find("div>div>span").html(msg[index][3]);
                            $(this).find("ol span:first").html(msg[index][0])
                            $(this).find("ol span").eq(1).html("团购价：" + msg[index][1])
                        })


                        var lastClone = aLi.slice(6, 9).clone();
                        var startClone = aLi.slice(0, 3).clone();
                        console.log(lastClone)
                        $(lastClone).prependTo(".m4 ul");
                        $(startClone).appendTo(".m4 ul");
                    }
                })
                aLi.hover(function() {
                    $(this).find("ol").stop().animate({ top: "0" }, 300);
                    clearInterval(timer);
                }, function() {
                    $(this).find("ol").stop().animate({ top: "100%" }, 200);
                    timer = setTimer();
                })


                ul.on("mouseover", function() {
                    btns.show()
                });
                ul.on("mouseout", function(ev) {
                    btns.hide();
                })
                btns.hover(function() {
                    ul.off("mouseout");
                    $(this).show();
                    $(this).css({
                        backgroundPositionY: "-42px"
                    })
                    clearInterval(timer)

                }, function() {

                    $(this).hide();
                    $(this).css({
                        backgroundPositionY: "8px"
                    })
                    ul.on("mouseout", function() {
                        btns.hide();
                    })
                    timer = setTimer();
                })

                function bgColor(index) {
                    index %= 3;
                    var cur = spans.eq(index);
                    cur.css({
                        backgroundColor: "red"
                    })
                    spans.not(cur).css({
                        backgroundColor: "#fff"
                    })
                }

                function move(box) {
                    index++;
                    if (index >= 5) index = 2;

                    box.animate({
                        marginLeft: positions[index]
                    }, 800);
                    if (index == 4) {

                        setTimeout(function() {
                            box.css({
                                marginLeft: "-1205px"
                            })
                        }, 1000)

                    }
                    bgColor(index - 1);
                    console.log(index)

                }

                function setTimer() {
                    var timer = setInterval(function() {
                        move(ul);
                    }, 5000)
                    return timer
                }
                timer = setTimer();

                btns.on("click", function() {
                    var that = $(this);
                    btnClick(that);

                });

                function btnClick(that) {
                    if (timer2) return;
                    console.log(timer2)
                    timer2 = setTimeout(function() {

                        if (that.attr("class") == "btn_left") {
                            index--;
                            if (index < 0) {
                                index = 2;
                            }
                            console.log(index);
                            bgColor(index - 1);
                            ul.css({
                                marginLeft: positions[index + 1]
                            })
                            ul.animate({
                                marginLeft: positions[index]
                            }, 300)

                        } else if (that.attr("class") == "btn_right") {
                            index++;
                            if (index >= 4) {
                                index = 1;
                            }
                            bgColor(index + 2);

                            ul.css({
                                marginLeft: positions[index - 1]
                            })
                            ul.animate({
                                marginLeft: positions[index]
                            }, 300)
                        }
                        timer2 = null;
                    }, 300)
                }

            }();
        })




        ! function() {

            var leftbox = $(".m3 .left");
            var rightbox = $(".m3 .right");
            var bgbox = $(".bgpic");
            var dots = $(".m3 ul li");
            $.lunbo(leftbox, rightbox, bgbox, dots);

        }();
    </script>
</body>

</html>